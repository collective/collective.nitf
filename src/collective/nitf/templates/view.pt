<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="collective.nitf">

<head>
  <metal:styleslot fill-slot="style_slot">
    <link rel="stylesheet" type="text/css"
        media="all"
        tal:attributes="href string:${context/@@plone_portal_state/portal_url}/++resource++collective.nitf/galleria-theme/galleria.nitf_theme.css" />
  </metal:styleslot>
</head>

<body>
  <metal:bodytext fill-slot="main">
    <metal:main define-macro="main">
      <article vocab="http://schema.org/" typeof="Article"
          prefix="rnews: http://iptc.org/std/rNews/2011-10-07#"
          tal:define="text context/text/output|nothing">
        <div tal:replace="structure provider:plone.abovecontenttitle" />
        <!-- content-title -->
        <p property="rnews:articleSection" class="section"
           tal:content="context/section" />
        <h1 property="rnews:headline" class="documentFirstHeading"
            tal:content="context/title"></h1>
        <h2 property="rnews:alternativeHeadline" class="nitfSubtitle"
            tal:content="context/subtitle" />
        <div tal:replace="structure provider:plone.belowcontenttitle" />

        <!-- content-description -->
        <div property="rnews:description" class="documentDescription"
             tal:content="context/description" />

        <div tal:replace="structure provider:plone.abovecontentbody" />
        <div id="content-core">
          <div class="newsImageContainer"
              tal:define="image context/getImage"
              tal:condition="image">
              <a href="@@galleria"
                 id="parent-fieldname-image"
                 class="parent-nitf-image"
                 tal:attributes="href string:${context/absolute_url}/@@galleria">
               <img tal:define="scales image/@@images;
                                thumbnail python: scales.scale('image', scale='mini');"
                    tal:condition="thumbnail"
                    tal:attributes="src thumbnail/url;
                                    width thumbnail/width;
                                    height thumbnail/height;
                                    alt context/imageCaption|nothing;"
                    property="rnews:thumbnailUrl" />
              </a>
              <p class="discreet"
                  tal:condition="context/imageCaption"
                  tal:content="context/imageCaption">
                  Image Caption
              </p>
              <span id="lupa"></span>
          </div>

          <p tal:define="is_editable context/@@plone_context_state/is_editable"
             tal:condition="python:not text and is_editable"
             i18n:translate="no_body_text"
             class="discreet">
              This item does not have any body text, click the edit tab to change it.
          </p>

          <div id="parent-fieldname-text" class=""
               tal:condition="text">
              <div property="rnews:articleBody" tal:content="structure text">The body</div>
          </div>
        </div>

        <div tal:replace="structure provider:plone.belowcontentbody" />
      </article>
    </metal:main>
  </metal:bodytext>
</body>
</html>
